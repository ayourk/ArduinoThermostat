; PlatformIO Project Configuration File
; https://docs.platformio.org/page/projectconf.html
;
; Mirrors the arduino-cli build matrix in .github/workflows/build.yml
; Default environment: esp32s2dual (recommended build)

[platformio]
src_dir = .
default_envs = esp32s2dual

; ── Common libraries shared by all environments ──────────────────────────────

[libs_common]
deps =
    adafruit/Adafruit GFX Library
    adafruit/Adafruit ILI9341
    adafruit/Adafruit FT6206 Library
    adafruit/Adafruit Unified Sensor
    adafruit/Adafruit BME680 Library
    adafruit/Adafruit BME280 Library
    adafruit/Adafruit MAX31865 library
    adafruit/SdFat - Adafruit Fork
    bblanchon/ArduinoJson
    https://github.com/drhaney/pt100rtd.git

; ── Primary boards ──────────────────────────────────────────────────────────

[env:m4]
; Thermostat-M4-W5500 | Feather M4 Express (SAMD51) | Ethernet (PoE)
platform = atmelsam
board = adafruit_feather_m4
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet
    arduino-libraries/ArduinoOTA

[env:m0]
; Thermostat-M0-WINC1500 | Feather M0 WiFi | WiFi (WINC1500)
platform = atmelsam
board = adafruit_feather_m0
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/WiFi101
    arduino-libraries/ArduinoOTA

[env:rp2040]
; Thermostat-RP2040-W5500 | Feather RP2040 | Ethernet (PoE)
platform = https://github.com/maxgerhardt/platform-raspberrypi.git
board = adafruit_feather_rp2040
board_build.core = earlephilhower
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet

[env:esp32s2]
; Thermostat-ESP32S2-WiFi | Feather ESP32-S2 | WiFi
platform = espressif32
board = adafruit_feather_esp32s2
framework = arduino
lib_deps =
    ${libs_common.deps}

[env:esp32s3]
; Thermostat-ESP32S3-WiFi | Feather ESP32-S3 | WiFi
platform = espressif32
board = adafruit_feather_esp32s3
framework = arduino
lib_deps =
    ${libs_common.deps}

; ── Dual Network boards (ESP32 + PoE FeatherWing) ───────────────────────────

[env:esp32s2dual]
; Thermostat-ESP32S2-DualNet | Feather ESP32-S2 | WiFi + Ethernet (PoE) ⭐ Recommended
platform = espressif32
board = adafruit_feather_esp32s2
framework = arduino
build_flags = -DDUAL_NETWORK=1
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet

[env:esp32s3dual]
; Thermostat-ESP32S3-DualNet | Feather ESP32-S3 | WiFi + Ethernet (PoE)
platform = espressif32
board = adafruit_feather_esp32s3
framework = arduino
build_flags = -DDUAL_NETWORK=1
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet

[env:esp32v2dual]
; Thermostat-ESP32V2-DualNet | Feather ESP32 V2 | WiFi + Ethernet (PoE)
platform = espressif32
board = adafruit_feather_esp32_v2
framework = arduino
build_flags = -DDUAL_NETWORK=1
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet

; ── Optional ESP32 variants ──────────────────────────────────────────────────

[env:esp32v2]
; Thermostat-ESP32V2-WiFi | Feather ESP32 V2 | WiFi
platform = espressif32
board = adafruit_feather_esp32_v2
framework = arduino
lib_deps =
    ${libs_common.deps}

[env:esp32s2tft]
; Thermostat-ESP32S2TFT-WiFi | Feather ESP32-S2 TFT | WiFi
platform = espressif32
board = adafruit_feather_esp32s2_tft
framework = arduino
lib_deps =
    ${libs_common.deps}

[env:esp32s3tft]
; Thermostat-ESP32S3TFT-WiFi | Feather ESP32-S3 TFT | WiFi
platform = espressif32
board = adafruit_feather_esp32s3_tft
framework = arduino
lib_deps =
    ${libs_common.deps}

; ── Optional SAMD variants ───────────────────────────────────────────────────

[env:m4can]
; Thermostat-M4CAN-W5500 | Feather M4 CAN (SAME51) | Ethernet (PoE)
platform = atmelsam
board = adafruit_feather_m4_can
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet
    arduino-libraries/ArduinoOTA

[env:m0express]
; Thermostat-M0Express-W5500 | Feather M0 Express | Ethernet (PoE)
platform = atmelsam
board = adafruit_feather_m0_express
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet
    arduino-libraries/ArduinoOTA

; ── Experimental boards ──────────────────────────────────────────────────────

[env:nrf52840]
; Thermostat-nRF52840-W5500 | Feather nRF52840 | Ethernet (PoE) [EXPERIMENTAL]
platform = nordicnrf52
board = adafruit_feather_nrf52840
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet

[env:nrf52840sense]
; Thermostat-nRF52840Sense-W5500 | Feather nRF52840 Sense | Ethernet (PoE) [EXPERIMENTAL]
platform = nordicnrf52
board = adafruit_feather_nrf52840sense
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet

[env:stm32f405]
; Thermostat-STM32F405-W5500 | Feather STM32F405 | Ethernet (PoE) [EXPERIMENTAL]
platform = ststm32
board = adafruit_feather_f405
framework = arduino
lib_deps =
    ${libs_common.deps}
    arduino-libraries/Ethernet
